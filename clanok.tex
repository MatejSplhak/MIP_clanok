% Metódy inžinierskej práce
\documentclass[10pt,twoside,slovak,a4paper]{article}
\usepackage[slovak]{babel}
%\usepackage[T1]{fontenc}
\usepackage[IL2]{fontenc} % lepšia sadzba písmena Ľ než v T1
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{url} % príkaz \url na formátovanie URL
\usepackage{hyperref} % odkazy v texte budú aktívne (pri niektorých triedach dokumentov spôsobuje posun textu)
\usepackage{cite}
\graphicspath{ {./images/} }
%\usepackage{times}
\pagestyle{headings}
\title{Modely vizúalnej pozornosti a ich využitie pri formátovaní videa\thanks{Semestrálny projekt v predmete Metódy inžinierskej práce, ak. rok 2021/22, vedenie: Vladimír Mlynarovič}} % meno a priezvisko vyučujúceho na cvičeniach
\author{Matej Šplhák\\[2pt]
	{\small Slovenská technická univerzita v Bratislave}\\
	{\small Fakulta informatiky a informačných technológií}\\
	{\small \texttt{xsplhak@stuba.sk}}
	}
\date{\small 14. December 2021} % upravte
\begin{document}
\maketitle
\begin{abstract}
Tento článok sa koncentruje na priblíženie výpočtových modelov vizuálnej pozornosti a ich využitie pri video kompresii. V tejeto oblasti existuje viacero navrhovaných modelov no táto práca sa sústredi na hlavné dva: Automatické modely vizualnej pozornosti, ktoré sa snažia pomocou deep learningu adaptívne kompresovať časti obrazu videa podľa ich predpokladanej významnosti a Semi-automatické modely vizuálnej pozornosti, ktoré  si vyžadujú sledovať pohyby zraku jedného pozorovateľa a postprocessing na báze časovej konzistencie. 
\end{abstract}


\section{Úvod}
Podľa Cisco  Visual  Networking  Index  Forecast\cite{cisco:forecast}je predpokladaná, že v roku 2022 prehrávanie videí bude predstavovať 82\% celkovej premávky po IP adresách. Táto projekcia poukazuje na dôležitú potrebu vývoja nového spôsobu kompresie videa, pretože aj malé vylepšenie pre rozšírený video encoder, by znamenalo znamenitý pokles vo velkosti premávky videí. Niekoľko nových štandardov pre video encoding je práve v procese vývoja(napr. VVC a AVI). Aj keď adapcia týchto štandardov sľubuje lepšie výsledky, ich vývoj potrvá ešte niekoľko rokov hlavne z toho dôvodu, že sa musia zariadenia na sledovanie videi aktualizovať. Iný smer pohľadu na túto problematiku je vývoj nových encoderov, ktoré by boli kompatibilné so širšou škálou štandardov. Zámer tejto práce je ten druhý spôsob, presnejšie, porovnávať dva typy encodingu založené na rôznych modeloch vizuálnej pozornosti. Prvý z nich\cite{Czarnecki:Progress} je encoder založený na plne automatickom modely vizuálnej pozornosti, ktorý používa mapy významnosti na rozloženie bitratu na rôzne miesta danej snímky podľa prepokladanej výnamnosti jednotlivych oblastí v danej snímke. Druhý encoder\cite{Coplien:MPD} je založený na semi-automatickom modely vizualnej pozornosti, ktorý zaznamenáva rôzne body fixácie zraku pozorovateľa na danej snímke. Tieto body fixácie neskôr prejdu postprocessingom, ktorý spresní ich pozíciu. Tento článok je rozdelený na viacero sekcíi. V sekcií~\ref{1modely} sa bližšie vysvetlia modely vizuálnej pozornosti a taktiež mapy významnosti. V nasledujúcej sekcií~\ref{porovnanie} je samostatné porovnanie týchto typov encodingu. Výsledky tochto porovnania sú zaznamenané v sekcii~\ref{zaver}   


\section{Modely vyzuálnej pozornosti} \label{1modely}
Model ľudskej vizuálnej pozornosti je model, ktorý sa snaží napodobniť alebo predpovedať správanie ludskej vizuálnej pozornosti. Modely vizuálnej pozornosti sa rozvetvujú do viacerých smerov, z ktorých jeden sú výpočtové modely vizuálnej pozornosti. Výpočtový model vizuálnej pozornosti je model, ktorý zahrňuje nie len formálny opis toho ako vypočítava pozornosť ale aj môže byť testovaný tým, že sa mu predložia vstupy obrazov podobné tým, ktoré by boli predložené živému subjektu a následne sa sleduje ako presný bol predpokladaný výsledok. Tieto modely často používajú mapy významnosti.%dokonci
\subsection{mapy významnosti} \label{ina:nejake}
Podľa definície Christof Kocha a Shimon Ullmana z roku 1985, mapa významnosti je topografická mapa poskladaná z rôznych vizuálnych aspektov obrazu(farba, orientácia, pohyb atď), ktoré sú neskôr zvýraznené podľa ich predpokladanej významnosti. V podstate pozorujú ako moc je daný bod obrazu odlišný od jeho okolia. Koch a Ullman taktiež predpokladali, že región s najväčšou významnosťou je vhodným kandidátom pre ľudskú zrakovú pozornosť. Mapy významnosti sa hlavne používajú pri predpovedaní pohybu očí, napr. na identifikovanie najdôležitejšej informácie pri vizuálnych vstupoch pre lepší výkon pri generovaní alebo prenášaní vizuálnych dát.%pridat vypocet saliency map
\begin{figure*}[tbh]
\centering
\includegraphics[scale=0.5]{saliency}
\caption{Príklad mapy významnosti. Napravo je je vizuálny obraz a naľavo je jeho mapa významnosti.}
\label{f:rozhod}
\end{figure*}
\subsection{Bottom-up modely} \label{ina}
Modely, ktoré využívajú tieto mapy významnosti sú takzvané Bottom-up modely. Bottom-up modely predpokladajú, že pozornosť je priťahovaná vlastnosťami obrazu. Autori\cite{bottom} naviac aplikujú postprocessing na báze vzájomnosti pixelov, kde podobné pixely zhlukujú do spoločných skupín. Výskumníci zrakovej psychológie, ako Yarbus[1967], koch[2000] a Parkhurst[2002], taktiež ukázali, že zrakový systém je vysoko náchylný na rôzne črty obrazu, ako napr. rohy, náhle zmeny farby a prudké pohyby. Autor\cite{saliency:vytvar} opisuje, že výroba modelu tohoto bottom-up procesu spočíva v tom, že sa vezme vstupný obraz, ktorý je následne rozdelený do troch pralélnych kanálov, jeden pre každú črtu obrazu: farba, intenzita a orientácia. Výsledky z týchto troch kanálov sú rozprestrené po modele a reorganizované do stred-obkolesujúceho rozmiestnenia. Nakoniec sa aktivita v každom kanáli normalizuje a lineárne aplikuje čím vytvára mapy významnosti. Problémy nastávajú vtedy, keď pozorovateľove ciele sú dôležitejšie ako významné body obrazu. Týmto smerom sa vydávajú Top down modely.    
\subsection{Top-down modely} \label{nejaka}
Top-down process je riadený kontrolným procesom, ktorý sústredí pozornosť ľudského pozorovateľa na jeden alebo viacej objektov, ktoré su relevantné k jeho cieľom pri sledovaní scény, ako napríklad hľadať dopravné značenie, snažiť sa nájsť  protivníka vo videohre alebo počítať nejaké špecifické objekty v danej scéne. V tomto prípade objekty, ktoré by normálne priťahovali pozornosť sledovaťela, môžu byť kompletne odignorované, ak sú irelevantné k cieľu pozorovateľa. V roku 1967, ruský psychológ Yarbus zapísal body fixácie a sakády(sakády sú pohyby našich očí medzi dvoma bodami fixácie) rôznych pozorovateľov zatiaľ ako sa pozerali na každodenné objekty a scény. V tomto experimente sa pýtali pozorovateľov na rôzne otázky ohľadom scény znázornenej v Ilia Jefimovič Repinovom  obraze "Nečakali". Výsledkom tohto boli významne rozdielne vzory sakád, pričom každá z nich poukazovala na tie objekty v obraze, ktoré obsahovali najviac informácií relevantných k odpovedi na otázku. Tento experiment je zobrazený na obrázku 2~\ref{sakady}.
\begin{figure*}[tbh]
\centering
\includegraphics[scale=0.5]{yarbus}
\caption{ Dopad úloh na pohyb očí. Repinov obraz bol pozorovaný subjektami s rozlišnými inštrukciami(obrázky idú v poradí z ľava do prava z hora dole):1. Voľné pozorovanie, 2. Odhadnite ich vek, 3. Zistite čo robili pred tým ako sa ukázal nečakaný hosť, 4. Zapamätajte si oblečenie ktoré majú na sebe postavy oblečené, 5. Zapamätajte si pozíciu ľudí a objektov v izbe a 6. Predpovedajte, ako dlho bol nečakaný hosť preč od danej rodiny[Yarbus 1967].}
\label{yarbus:sakady}
\end{figure*}

%\subsection{Video kompresia na základe významnosti}
%Hlavná idea video kompresie na základe významnosti je alokovanie bitov na regióny väčšej významnosti. Tieto regióny (region of interest ďalej ROI) sú potom encodované s vyššou kvalitou ako non-ROI.%dokoncit

\section{Porovnanie automatického a semi-automatickéeho modelu vizuálnej pozornosti} \label{porovnanie}
V minulosti boli výsledky semiautomatického a automatického modelu neporovnateľné. Semiautomatický model dosahoval oveľa lepšie výsledky vďaka tomu, že používal dáta z eye trackingu ľudského pozorovateľa. Ale v posledných rokoch, vďaka vývoju technológie a hlavne deep learningum, automatický model dobieha výkonom semiautomatický.

\subsection{Semi-automatický model vizuálnej pozornosti} \label{semi-auto}
Väčšinu času, rozdelenie vizuálnej pozornosti je nejednotné, teda aspoň čo sa týka umeleckého obsahu. Toto rozdelenie poukazuje na fakt, že zaznamenávanie pohľadu len niekoľkých pozorovateľov dokáźe vygenerovať mapy významnosti, ktoré by sa podobali ideálnemu výsledku. Na obr. 4 možno vidieť tento výsledok. Každý bod je skóre podobnosti (bližšie vysvetlené v !!!!!!citácia) medzi mapou významnosti daného počtu pozorovateľov a mapami významnosti ostatných počtov pozorovateľov. Každý bod bol spriemerovaný z každého snímku a spomedzi piatich skupín pozorovateľov. Zároveň bolo v tom čase pravdou, že väčšina automatických modelov neukazovala lepšie výsledky ako základný, na stred zameraný model. Z čoho vyplýva, že nie sú porovnateľné s modelmi vytvorenými sledovaním pohybu očí a to ani pre jedného pozorovateľa. Vďaka tomuto výsledku navrhli tvorcovia\cite{Coplien:MPD} semiautomatický koncept(), ktorý používa body fixácie jedné pozorovateľaspolu s postprocessingom na báze časovej konzistencie pozornosti, t.j. objekty ktoré sú označené ako významné v jednej snímke, sú taktiež predpokladané za významné v susedných snímkach.
\subsubsection{Kompresia v semiautomatickom modeli}
Na kompresiu si tvorcovia\cite{Coplien:MPD} vybrali H.264, pretože to je najrozšírenejší štandard na kompresiu videa a x264 pretože to je najpopulárnejší video encoder. Pri kompresii sú predpovedané mapy významnosti downscalenuté aby pasovali do rozmerov 16x16 macroblokovej mriežky. Ak  \(Q \in R^+\) je mapa hodnôt qvantizačného parametru(QP) macroblocku vybraných encoderom, a \(S : R^2\rightarrow [0;1]\) je downscalnutá mapa významnosti pre daný snímok tak nové hodnoty QP na makroblokoch môžu byť vypočitané nasledujúcou rovnicou:
\[{Q}' = \max(Q - \psi \cdot (S - ES),0)\]
Týmto spôsobom redukujú hodnoty QP na makroblokoch obasuhujúcich významné regióny alebo naopak zväčšujú hodnoty QP na makroblokoch obsahujúcich nevýznamné regióny. Parameter\(\psi\) je zadaný používateľom a reguluje rozmiestnenie bitratu medzi významnými a nevýznamnými regiónmi: čím väčšia hodnota tým viac bitov pre významné regióny.

\subsection{Automatický model vyzuálnej pozornosti} \label{auto}
%dokoncit
\section{Záver} \label{zaver} 
%dokoncit
\section{CollabComment} \label{comment}
% týmto sa generuje zoznam literatúry z obsahu súboru literatura.bib podľa toho, na čo sa v článku odkazujete
\bibliography{literatura}
\bibliographystyle{plain} % prípadne alpha, abbrv alebo hociktorý iný
\end{document}
